<ul class="nav nav-tabs">
    <li class="active">
        <a href="#basic" data-toggle="tab">Basic</a>
    </li>
    <li>
        <a href="#stories" data-toggle="tab">Stories</a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="basic">
        <form id="formMilestoneEdit" class="form-horizontal">
            <input type="hidden" name="projectId" value="<%= milestone.projectId %>" />

            <div class="form-group required">
                <label class="col-lg-3 control-label" for="formMilestoneEditTitle">Title</label>
                <div class="col-lg-9">
                    <input id="formMilestoneEditTitle" name="title" type="text" class="form-control" placeholder="enter milestone name" required="required" value="<%= milestone.title %>" />
                </div>
            </div>

            <div class="form-group">
                <label class="col-lg-3 control-label" for="formMilestoneEditDescription">Description</label>
                <div class="col-lg-9">
                    <textarea id="formMilestoneEditDescription" name="description" class="form-control" data-wysiwyg="true" placeholder="enter milestone description"><%= milestone.description %></textarea>
                </div>
            </div>

            <div class="form-group">
                <label class="col-lg-3 control-label" for="formMilestoneEditDeadline">Deadline</label>
                <div class="col-lg-9">
                    <div class="input-group date deadline">
                        <input id="formMilestoneEditDeadline" name="deadline" type="text" class="form-control dateInput" size="16" value="<%= milestone.deadlineFormatted() %>"
                               data-validate-type="date"
                               data-type="project"
                               data-focus="false"
                        />
                        <span class="input-group-addon"><i class="icon-calendar"></i></span>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="tab-pane" id="stories">
        <table id="milestoneStories" class="table table-striped table-hover table-condensed">
            <thead>
            <tr>
                <th></th>
                <th class="col-md-5">Story</th>
                <th class="col-md-1">Estimate</th>
                <th class="col-md-4">Progress</th>
                <th class="col-md-1 text-right">Tasks</th>
            </tr>
            </thead>
            <tbody>
            <% _.each(stories, function(story) { %>
            <tr>
                <td class="actionMenu">
                    <div class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="100" href="#">
                            <i class="icon icon-chevron-down"></i>
                        </a>
                        <ul class="dropdown-menu milestone-actions">
                            <li>
                                <a href="javascript: void(0);" data-story-id="<%= story.id %>" data-milestone-id="<%= milestone.id %>" data-action="storyEdit">
                                    <i class="icon icon-wrench"></i> Edit story
                                </a>
                            </li>
                            <li>
                                <a href="javascript: void(0);" data-story-id="<%= story.id %>" data-milestone-id="<%= milestone.id %>" data-action="storySplit">
                                    <i class="icon icon-code-fork"></i> Split story
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="javascript: void(0);" data-story-id="<%= story.id %>" data-milestone-id="<%= milestone.id %>" data-action="storyDelete" class="text-danger">
                                    <i class="icon icon-remove"></i> Delete story
                                </a>
                            </li>
                        </ul>
                    </div>
                </td>
                <td>
                    <%= story.title %>
                </td>
                <td class="text-right">
                    <%= (story.estimate == -1) ? '???' : story.estimate %>
                </td>
                <td>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="<%= story.progress %>" aria-valuemin="0" aria-valuemax="100" style="width: <%= story.progress %>%;">
                            <% if (story.progress > 0) { %>
                            <span ><%= story.progress %>% Complete</span>
                            <% } %>
                        </div>
                    </div>
                </td>
                <td class="text-right">
                    <%= story.tasks.length %>
                </td>
            </tr>
            <% }) %>
            </tbody>
        </table>
    </div>
</div>