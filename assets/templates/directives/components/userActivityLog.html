<div>
    <div data-ng-show="loading && !loaded">
        <tb-template data-template="layout/loading"></tb-template>
    </div>

    <div data-ng-show="loaded">
        <div class="row table-header">
            <div class="col-md-9">
                <h4>
                    Activity log

                    <span>({{itemCount}})</span>
                </h4>
            </div>

            <div class="col-md-3 pull-right">
                <list-search data-filters="filters"></list-search>
            </div>
        </div>

        <div class="data-loading"
            data-ng-show="loading"
        >
            <tb-template data-template="layout/loading"></tb-template>
        </div>

        <table class="table table-striped table-hover table-condensed"
            data-ng-class="{'loading-fade': loading}"
        >
            <thead>
                <tr>
                    <th class="text-nowrap"
                        data-ng-repeat="item in titleItems | filter:titleFilter"
                    >
                        <a
                            data-ng-show="item.sortable"
                            data-ng-click="changeSort(item)"
                            data-ng-class="{'text-muted': !item.inSearch}"
                            data-ng-bind-html="item.title"
                        ></a>
                        <span
                            data-ng-show="!item.sortable"
                            data-ng-class="{'text-muted': !item.inSearch, 'text-info': item.inSearch}"
                            data-ng-bind-html="item.title"
                        ></span>
                        <i class="fa"
                           data-ng-show="sort.column == item.column"
                           data-ng-class="{'fa-angle-down': !sort.direction, 'fa-angle-up': sort.direction}"
                        ></i>
                    </th>
                </tr>
            </thead>
            <tbody class="text-small">
                <tr data-ng-show="items.length == 0">
                    <td colspan="100%" class="text-muted text-center">
                        <em>no data...</em>
                    </td>
                </tr>
                <tr
                    data-ng-repeat="item in items"
                >
                    <td class="text-nowrap">
                        {{item.objectName}} [{{item.objectId}}]
                    </td>
                    <td class="col-md-9" data-ng-bind-html="item.message"></td>
                    <td class="col-md-3">
                        <span id="qtip-trigger-object-data-{{item.id}}"
                            data-qtip-options='{ "hide": { "delay": 200, "fixed": true } }'
                        >Data length: {{item.objectData.length}}</span>

                        <div
                            data-ng-if="item.id"
                            data-qtip
                            data-qtip-id="object-data-{{item.id}}"
                            data-class="json"
                            data-position="bottomRight"
                        >
                            <pre
                                data-json='item.objectData'
                                data-pretty-json
                            ></pre>
                        </div>
                    </td>
                    <td class="text-nowrap">{{item.createdAt | amDateFormat:user.momentFormatDateTime}}</td>
                </tr>
            </tbody>
        </table>

        <pagination class="pagination-sm"
            data-total-items="itemCount"
            data-ng-model="currentPage"
            data-items-per-page="itemsPerPage"
            data-max-size="10"
            data-boundary-links="true"
            data-rotate="false"
        ></pagination>
    </div>
</div>